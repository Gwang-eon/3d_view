<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒŒì¼ ì ‘ê·¼ ì§„ë‹¨ ë„êµ¬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .test-section {
            background: #2d2d2d;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #00ff88;
        }
        .result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .success { background: #0f4c3a; border-left: 4px solid #00ff88; }
        .error { background: #4c0f0f; border-left: 4px solid #ff4444; }
        .warning { background: #4c3a0f; border-left: 4px solid #ffaa00; }
        button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0052a3; }
        .file-size { font-weight: bold; color: #ffaa00; }
        pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” íŒŒì¼ ì ‘ê·¼ ì§„ë‹¨ ë„êµ¬</h1>
    <p>í˜„ì¬ í”„ë¡œì íŠ¸ì˜ GLTF íŒŒì¼ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>

    <div class="test-section">
        <h2>1ë‹¨ê³„: ê¸°ë³¸ íŒŒì¼ í™•ì¸</h2>
        <button onclick="testBasicFiles()">íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸</button>
        <div id="basic-results"></div>
    </div>

    <div class="test-section">
        <h2>2ë‹¨ê³„: íŒŒì¼ í¬ê¸° í™•ì¸</h2>
        <button onclick="testFileSizes()">íŒŒì¼ í¬ê¸° í™•ì¸</button>
        <div id="size-results"></div>
    </div>

    <div class="test-section">
        <h2>3ë‹¨ê³„: ì‹¤ì œ ë‚´ìš© í™•ì¸</h2>
        <button onclick="testFileContent()">íŒŒì¼ ë‚´ìš© í™•ì¸</button>
        <div id="content-results"></div>
    </div>

    <div class="test-section">
        <h2>4ë‹¨ê³„: í•´ê²° ë°©ì•ˆ</h2>
        <div id="solution-results"></div>
    </div>

    <script>
        const models = [
            {
                name: 'ë¸”ë¡ ì˜¹ë²½',
                path: './gltf/Block_Retaining_Wall/Block_Retaining_Wall.gltf',
                preview: './gltf/Block_Retaining_Wall/preview.jpg'
            },
            {
                name: 'ìº”í‹¸ë ˆë²„ ì˜¹ë²½', 
                path: './gltf/Cantilever_Retaining_Wall/Cantilever_Retaining_Wall.gltf',
                preview: './gltf/Cantilever_Retaining_Wall/preview.jpg'
            },
            {
                name: 'MSE ì˜¹ë²½',
                path: './gltf/mse_Retaining_Wall/mse_Retaining_Wall.gltf', 
                preview: './gltf/mse_Retaining_Wall/preview.jpg'
            }
        ];

        async function testBasicFiles() {
            const container = document.getElementById('basic-results');
            container.innerHTML = '<p>í™•ì¸ ì¤‘...</p>';
            
            let results = '<h3>íŒŒì¼ ì ‘ê·¼ í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h3>';
            
            for (const model of models) {
                try {
                    const response = await fetch(model.path, { method: 'HEAD' });
                    const status = response.ok ? 'success' : 'error';
                    const statusText = response.ok ? 'âœ… ì ‘ê·¼ ê°€ëŠ¥' : `âŒ ì ‘ê·¼ ì‹¤íŒ¨ (${response.status})`;
                    
                    results += `<div class="result ${status}">
                        <strong>${model.name}:</strong> ${statusText}<br>
                        <small>ê²½ë¡œ: ${model.path}</small>
                    </div>`;
                } catch (error) {
                    results += `<div class="result error">
                        <strong>${model.name}:</strong> âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜<br>
                        <small>ì˜¤ë¥˜: ${error.message}</small>
                    </div>`;
                }
            }
            
            container.innerHTML = results;
        }

        async function testFileSizes() {
            const container = document.getElementById('size-results');
            container.innerHTML = '<p>íŒŒì¼ í¬ê¸° í™•ì¸ ì¤‘...</p>';
            
            let results = '<h3>íŒŒì¼ í¬ê¸° ë¶„ì„:</h3>';
            
            for (const model of models) {
                try {
                    const response = await fetch(model.path, { method: 'HEAD' });
                    const contentLength = response.headers.get('Content-Length');
                    const size = contentLength ? parseInt(contentLength) : 0;
                    
                    let sizeText, sizeClass;
                    if (size === 0) {
                        sizeText = 'âš ï¸ 0 bytes (ë¹ˆ íŒŒì¼ ë˜ëŠ” LFS í¬ì¸í„°)';
                        sizeClass = 'warning';
                    } else if (size < 1000) {
                        sizeText = `âš ï¸ ${size} bytes (ë„ˆë¬´ ì‘ìŒ, LFS í¬ì¸í„° ê°€ëŠ¥ì„±)`;
                        sizeClass = 'warning';
                    } else {
                        sizeText = `âœ… ${formatBytes(size)} (ì •ìƒ)`;
                        sizeClass = 'success';
                    }
                    
                    results += `<div class="result ${sizeClass}">
                        <strong>${model.name}:</strong> ${sizeText}
                    </div>`;
                } catch (error) {
                    results += `<div class="result error">
                        <strong>${model.name}:</strong> âŒ í¬ê¸° í™•ì¸ ì‹¤íŒ¨<br>
                        <small>${error.message}</small>
                    </div>`;
                }
            }
            
            container.innerHTML = results;
        }

        async function testFileContent() {
            const container = document.getElementById('content-results');
            container.innerHTML = '<p>íŒŒì¼ ë‚´ìš© í™•ì¸ ì¤‘...</p>';
            
            let results = '<h3>íŒŒì¼ ë‚´ìš© ë¶„ì„:</h3>';
            
            // ì²« ë²ˆì§¸ ëª¨ë¸ë§Œ í…ŒìŠ¤íŠ¸ (ìš©ëŸ‰ ê³ ë ¤)
            const model = models[0];
            
            try {
                const response = await fetch(model.path);
                const text = await response.text();
                
                let contentType, contentClass;
                if (text.includes('version https://git-lfs.github.com/spec/v1')) {
                    contentType = 'âŒ Git LFS í¬ì¸í„° íŒŒì¼';
                    contentClass = 'error';
                } else if (text.includes('"asset"') && text.includes('"scene"')) {
                    contentType = 'âœ… ìœ íš¨í•œ GLTF íŒŒì¼';
                    contentClass = 'success';
                } else if (text.length < 100) {
                    contentType = 'âš ï¸ íŒŒì¼ì´ ë„ˆë¬´ ì‘ìŒ';
                    contentClass = 'warning';
                } else {
                    contentType = 'âš ï¸ ì•Œ ìˆ˜ ì—†ëŠ” í˜•ì‹';
                    contentClass = 'warning';
                }
                
                results += `<div class="result ${contentClass}">
                    <strong>${model.name}:</strong> ${contentType}<br>
                    <small>íŒŒì¼ í¬ê¸°: ${text.length} ë¬¸ì</small>
                </div>`;
                
                if (text.length < 500) {
                    results += `<div class="result warning">
                        <strong>íŒŒì¼ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°:</strong>
                        <pre>${text.substring(0, 300)}${text.length > 300 ? '...' : ''}</pre>
                    </div>`;
                }
                
            } catch (error) {
                results += `<div class="result error">
                    <strong>${model.name}:</strong> âŒ ë‚´ìš© ì½ê¸° ì‹¤íŒ¨<br>
                    <small>${error.message}</small>
                </div>`;
            }
            
            container.innerHTML = results;
            
            // í•´ê²° ë°©ì•ˆ í‘œì‹œ
            showSolutions();
        }

        function showSolutions() {
            const container = document.getElementById('solution-results');
            
            const solutions = `
                <h3>ğŸ› ï¸ ë¬¸ì œ í•´ê²° ë°©ì•ˆ:</h3>
                
                <div class="result warning">
                    <strong>Git LFS íŒŒì¼ì¸ ê²½ìš°:</strong><br>
                    1. <code>git lfs pull</code> ëª…ë ¹ì–´ë¡œ ì‹¤ì œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ<br>
                    2. GitHubì—ì„œ "Download ZIP" ëŒ€ì‹  git clone ì‚¬ìš©<br>
                    3. Git LFSê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                </div>
                
                <div class="result warning">
                    <strong>ë¡œì»¬ ì„œë²„ í•„ìš”í•œ ê²½ìš°:</strong><br>
                    1. Python: <code>python -m http.server 8000</code><br>
                    2. Node.js: <code>npx serve .</code><br>
                    3. PHP: <code>php -S localhost:8000</code><br>
                    4. ë˜ëŠ” run.bat íŒŒì¼ ì‚¬ìš© (Chrome ì „ìš© ëª¨ë“œ)
                </div>
                
                <div class="result success">
                    <strong>ì¦‰ì‹œ í•´ê²°ì±…:</strong><br>
                    1. ì œê³µëœ run.bat íŒŒì¼ ì‹¤í–‰<br>
                    2. ë˜ëŠ” Live Server ê°™ì€ VS Code í™•ì¥ ì‚¬ìš©<br>
                    3. íŒŒì¼ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                </div>
            `;
            
            container.innerHTML = solutions;
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = () => {
            console.log('ğŸ“‹ íŒŒì¼ ì§„ë‹¨ ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ');
            console.log('í˜„ì¬ ìœ„ì¹˜:', window.location.href);
        };
    </script>
</body>
</html>